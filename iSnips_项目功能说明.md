# iSnips · 片语｜网页片段与想法随手记

iSnips（片语）是一款专为网页浏览设计的碎性知识与思维片段记录插件。一键记下网页片段与想法，自动保留来源，随时可回顾。它不仅仅是一个摘录工具，更是一个助力用户后期索源、回顾成长、了解自我的思维瞬间库。

## 1. 核心愿景 (Core Vision)
*   **碎性知识工具**：将散落在浩瀚网络中的知识碎片与灵光一现的思维瞬间，系统化地整合为属于自己的知识宇宙。
*   **思维瞬间追踪**：通过时间的维度审视自己的阅读与思考轨迹，在回顾中发现思维的成长瞬间。
*   **极简记录体验**：无感化的捕获操作，让记录成为一种下意识的 habits，而非负担。

## 2. 核心功能

### 🚀 思维捕获 (Thought Capture)
*   **思维捕获**：在网页上选中关键信息，通过 `Alt+C` 将其瞬间记录。自动记录来源 URL、标题及捕获时刻。
*   **随笔洞察 (Insights)**：支持记录不关联特定网页的独立想法，捕捉那一刻的灵感瞬间。
*   **黑名单净化**：排除无关网站或敏感站点的干扰，保持片段库的纯净。

### 🎨 动态高亮 (Visual Anchors)
*   **持久记忆**：网页上的黄色显著高亮就像是在书页中留下的折痕，即使跨越时空重新访问，记忆依然鲜活。
*   **时空穿梭**：在片段库中点击任意卡片，工具会带您穿梭回原始网页的那个特定瞬间。

### 📊 个人知识片段库 (Insight Library)
*   **片段流展示**：美观的 3-6 列瀑布流布局，像照片墙一样展现您的思维瞬间。
*   **时光轴分组**：按“今日片段”、“昨日回顾”、“本周精粹”等时间维度自动排序，形成清晰的历史长廊。
*   **整理与交互**：
    *   **深度搜索**：快速从海量足迹中捞起特定记忆。
    *   **碎片修正**：直接编辑卡片内容，完善当时的思考。
    *   **尘埃归宿**：支持回收站机制，误删的足迹可被找回，过时的片段将随风消逝（30天自动清理）。

### 🔄 云端同步 (Cloud Sync)
*   **服务支持**：集成 **Google Drive** (通过 OAuth2 授权) 和 **WebDAV** (如坚果云、Nextcloud) 两种主流同步方案。
*   **智能合并**：使用基于时间戳的冲突解决逻辑，确保多端合并时不丢失最新更改。

### 🌍 国际化 (I18n)
*   **三语支持**：原生支持中文 (zh-CN)、英文 (en)、日文 (ja)，界面可实时切换。

---

## 2. 技术架构

### 前端技术栈
*   **开发语言**：原生 JavaScript (Vanilla JS, ES6+)。
*   **界面构建**：HTML5 + CSS3，极致轻量，确保存放足迹的容器足够敏捷。
*   **构建工具**：基于 Bun 的高效构建管线。

### 核心机制
*   **Background (Service Worker)**：`background.js` 作为功能核心，通过 IndexedDB 管理所有持久化的“记忆”。
*   **Content Script**：`content.js` 负责 DOM 交互（高亮、选中文字获取）及消息传递。
*   **Storage API**：结合了 `IndexedDB` (海量数据) 和 `chrome.storage.local` (配置同步)，实现高性能的数据存取。

---

## 3. 开发说明

### 常用命令
*   `node build.js`：完整构建项目，输出至 `dist/` 目录。
*   `node build.js --watch`：开发监听模式，适合调试。

### 快捷键定义
*   `Alt+C`：保存选中的片段。
*   `Alt+S`：打开扩展侧边栏 (Side Panel)。
*   `Alt+L`：(仅部分系统支持) 快速进入片段库。
